[Unit]
Description=Generate new UUID for disk GPT %I
DefaultDependencies=no
Before=local-fs-pre.target systemd-fsck-root.service
Wants=systemd-udevd.service
After=systemd-udevd.service
Requires=%i.device
After=%i.device
# Run before services that use device nodes, preventing them from racing
# with udev activity generated by sgdisk
Before=ignition-setup.service ignition-disks.service
RemainAfterExit=yes

[Service]
Type=oneshot
ExecStart=/usr/sbin/coreos-gpt-setup %I
